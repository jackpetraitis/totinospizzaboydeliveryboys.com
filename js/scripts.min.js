var wppizzaClickEvent="click",wppizzaShortcodeTotals=function(){};jQuery(document).ready(function(a){var b=function(){var c,b=a(".wppizza-cart-sticky"),d=!1;if(void 0!==wppizza.crt.lmtb&&a("#"+wppizza.crt.lmtb).length>0){d=a("#"+wppizza.crt.lmtb);var f=d.offset().top}var g=a(window).scrollTop()+wppizza.crt.mt,h=[],i=[],j=[],k=!1;wppizza.crt.anim>0&&""!=wppizza.crt.fx&&(k=!0),b.length>0&&a.each(b,function(b,c){h[b]=a(this),h[b].wrap("<div class='wppizza-cart-wrap'></div>"),i[b]=h[b].css(["backgroundColor"]),i[b]["offset-top"]=h[b].offset().top,i[b].state="",i[b]["height-int"]=h[b].height(),i[b]["width-int"]=h[b].width(),d&&f>i[b]["offset-top"]+i[b]["height-int"]&&(i[b]["limit-bottom"]=Math.floor(f-i[b]["height-int"])),j[b]=h[b].parent(),h[b].width(i[b]["width-int"]),j[b].height(i[b]["height-int"])});var l=function(a,b,c){var e=0;if(d){var f=c.offset().top,g=Math.floor(f-b-a["height-int"]);g<0&&(e=g)}return e};if(k||a(window).scroll(function(){var b=a(window).scrollTop()+wppizza.crt.mt;a.each(h,function(a,c){var e=l(i[a],b,d);i[a]["offset-top"]>=b&&h[a].removeClass("wppizza-cart-fixed").css({top:"","background-color":""+i[a].backgroundColor}),i[a]["offset-top"]<b&&h[a].addClass("wppizza-cart-fixed").css({top:wppizza.crt.mt+e+"px","background-color":""+wppizza.crt.bg})})}),k){var m=!0;setTimeout(function(){a.each(h,function(a,b){var c=l(i[a],g,d);i[a]["offset-top"]>=g&&(i[a].state="relative"),i[a]["offset-top"]<g&&(h[a].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg,top:"0"}),h[a].animate({top:wppizza.crt.mt+c+"px"},wppizza.crt.anim,""+wppizza.crt.fx,function(){}),i[a].state="fixed")}),m=!1},200),a(window).scroll(function(){if(!m){var b=a(window).scrollTop()+wppizza.crt.mt;clearTimeout(c),c=setTimeout(function(){a.each(h,function(a,c){var e=l(i[a],b,d);i[a]["offset-top"]>=b&&"relative"!=i[a].state&&(i[a].state="relative",h[a].removeClass("wppizza-cart-fixed"),h[a].animate({top:""},wppizza.crt.anim,""+wppizza.crt.fx,function(){h[a].css({"background-color":""+i[a].backgroundColor})})),i[a]["offset-top"]<b&&("fixed"!=i[a].state||d)&&(i[a].state="fixed",h[a].addClass("wppizza-cart-fixed").css({"background-color":""+wppizza.crt.bg}),h[a].animate({top:wppizza.crt.mt+e+"px"},wppizza.crt.anim,""+wppizza.crt.fx,function(){}))})},100)}})}};if(void 0!==wppizza.ofqc){var c=a("#wppizza-send-order .wppizza-item-quantity");c.spinner({min:0}),c.on("DOMMouseScroll mousewheel",function(a){return a.originalEvent.detail>0||a.originalEvent.wheelDelta<0?parseInt(this.value)>0&&(this.value=parseInt(this.value,10)-1):this.value=parseInt(this.value,10)+1,!1}),c.keydown(function(b){if(13==b.which||35==b.which)return b.preventDefault(),a(".wppizza-update-order").trigger("click"),!1}),a(document).on("click",".wppizza-update-order",function(b){var c=a(".wppizza-item-quantity"),d={};a.each(c,function(b,c){var f=(a(this),a(this).attr("id").split("-")),g=a(this).val();d[f[2]]=g}),a("html").css({position:"relative"}),a("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-update-order",data:d}},function(a){window.location.href=window.location.href},"json").error(function(b,c,d){a("body>#wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)})})}a(document).on("keyup",".wppizza-cart-incr",function(b){this.value=this.value.replace(/[^0-9]/g,""),13!=b.keyCode&&35!=b.keyCode||a(this).closest("li").find(".wppizza-cart-increment").trigger("click")});var d="";a(document).on("focus",".wppizza-cart-incr",function(a){d=this.value.replace(/[^0-9]/g,"")}),a(document).on("blur",".wppizza-cart-incr",function(b){this.value=this.value.replace(/[^0-9]/g,""),d!=this.value&&a(this).closest("li").find(".wppizza-cart-increment").trigger("click")});var e=function(a,b){if(a.length>0)for(i=0;i<a.length;i++){var c=new Function("term","return "+a[i]+"(term);");c(b)}};if(a(document).on("click",".wppizza-add-to-cart,.wppizza-remove-from-cart,.wppizza-cart-refresh,#wppizza-force-refresh,.wppizza-cart-increment,.wppizza-empty-cart-button",function(b){if(a(".wppizza-open").length>0){b.preventDefault(),b.stopPropagation(),void 0!==wppizza.isCheckout?(a("html").css({position:"relative"}),a("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),a(".wppizza-ordernow").attr("disabled","true")):a(".wppizza-order").prepend('<div id="wppizza-loading"></div>');var c=a(this),d=c.attr("id"),f=a(".wppizza-cart-button input,.wppizza-cart-button>a,.wppizza-empty-cart-button");f.attr("disabled","true");var g=!1;void 0===wppizza.itm||void 0===wppizza.itm.fbatc||c.hasClass("wppizza-add-to-cart-btn")||(g=!0);var h=1,i="";if(c.hasClass("wppizza-add-to-cart")){type="add";var j=d.split("-"),k=c.closest("article").find("#wppizza-category-"+j[1]).val();void 0!==k&&(i=k)}if(c.hasClass("wppizza-remove-from-cart")&&(type="remove"),c.hasClass("wppizza-empty-cart-button")&&(type="removeall",d=0),(c.hasClass("wppizza-cart-refresh")||"wppizza-force-refresh"==d)&&(type="refresh"),c.hasClass("wppizza-cart-increment")){var h=c.closest("li").find(".wppizza-cart-incr").val();type=0==h?"remove":"increment"}if("removeall"!=type&&"add"!=type&&c.fadeOut(100).fadeIn(400),g||"add"!=type||c.fadeOut(100).fadeIn(400),g&&"add"==type){var l=c.html();c.fadeOut(100,function(){c.html("<div class='wppizza-item-added-feedback'>"+wppizza.itm.fbatc+"</div>").fadeIn(400).delay(wppizza.itm.fbatcms).fadeOut(400,function(){c.html(l).fadeIn(100)})})}jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:type,id:d,itemCount:h,catId:i}},function(b){if(void 0!==wppizza.isCheckout)return window.location.href=window.location.href,void window.location.reload(!0);a(".wppizza-order").html(b.itemsajax),a(".wppizza-cart-button").html(b.button),a(".wppizza-cart-nocheckout").html(b.nocheckout),a(".wppizza-cart-total-items-label").html(b.order_value.total_price_items.lbl),a(".wppizza-cart-total-items-value").html(b.currency_left+""+b.order_value.total_price_items.val+b.currency_right),""==b.nocheckout&&(a(".wppizza-cart-discount-label").html(b.order_value.discount.lbl),""!=b.order_value.discount.val?a(".wppizza-cart-discount-value").html('<span class="wppizza-minus"></span>'+b.currency_left+b.order_value.discount.val+b.currency_right):a(".wppizza-cart-discount-value").html(b.order_value.discount.val),a(".wppizza-cart-delivery-charges-label").html(b.order_value.delivery_charges.lbl),""!=b.order_value.delivery_charges.val?a(".wppizza-cart-delivery-charges-value").html(b.currency_left+""+b.order_value.delivery_charges.val+b.currency_right):a(".wppizza-cart-delivery-charges-value").html(b.order_value.delivery_charges.val),a(".wppizza-cart-tax-label").html(b.order_value.item_tax.lbl),a(".wppizza-cart-tax-value").html(b.order_value.item_tax.formatted),a(".wppizza-cart-tax-included-label").html(b.order_value.taxes_included.lbl),a(".wppizza-cart-tax-included-value").html(b.currency_left+""+b.order_value.taxes_included.val+b.currency_right),a(".wppizza-cart-total-label").html(b.order_value.total.lbl),a(".wppizza-cart-total-value").html(b.currency_left+""+b.order_value.total.val+b.currency_right)),""==b.nocheckout&&0!=b.items.length||(a(".wppizza-cart-discount-label").html(""),a(".wppizza-cart-discount-value").html(""),a(".wppizza-cart-delivery-charges-label").html(""),a(".wppizza-cart-delivery-charges-value").html(""),a(".wppizza-cart-total-label").html(""),a(".wppizza-cart-total-value").html(""),a(".wppizza-cart-tax-label").html(""),a(".wppizza-cart-tax-value").html(""),a(".wppizza-cart-tax-included-label").html(""),a(".wppizza-cart-tax-included-value").html("")),0==b.items.length&&(a(".wppizza-cart-total-items-label").html(""),a(".wppizza-cart-total-items-value").html("")),f.removeAttr("disabled"),e(wppizza.funcCartRefr,b)},"json").error(function(b,c,d){console.log("error : "+d),console.log(b.responseText),a(".wppizza-order #wppizza-loading").remove()})}}),a(document).on("click",".wppizza-add-to-cart",function(b){0==a(".wppizza-open").length&&a(".wppizza-cart").length>0&&alert(wppizza.msg.closed)}),a(document).on("click","#wppizza-order-pickup-sel, #wppizza-order-pickup-js",function(b){if(a(".wppizza-open").length>0&&a(".wppizza-cart").length>0||a("#wppizza-send-order").length>0){var c=a(this);c.attr("disabled",!0);var d=c.is(":checked");if(1==d){if("wppizza-order-pickup-js"==c.attr("id"))if(void 0!==wppizza.opt&&void 0!==wppizza.opt.pickupConfirm){if(!confirm(wppizza.msg.pickup))return d?c.attr("checked",!1):c.attr("checked",!0),void c.attr("disabled",!1)}else alert(wppizza.msg.pickup)}else a("html").css({position:"relative"}),a("body").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),a(".wppizza-ordernow").attr("disabled","true");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"order-pickup",value:d,data:a("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(a){var b="";void 0!==a.anchor&&(b=a.anchor),window.location.href=a.location+b,window.location.reload(!0)},"json").error(function(a,b,c){console.log("error : "+c),console.log(a.responseText)})}}),a("#wppizza_calc_handling").length>0){var f=a("input[name='wppizza-gateway']");0==f.length&&(f=a("select[name='wppizza-gateway']")),f.change(function(b){if(a("#wppizza-send-order").prepend('<div id="wppizza-loading"></div>'),f.is(":radio"))var c=a("input[name='wppizza-gateway']:checked").val();else var c=a("select[name='wppizza-gateway']").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-select-gateway",data:a("#wppizza-send-order").serialize(),selgw:c}},function(a){window.location.href=window.location.href},"json").error(function(b,c,d){a("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)})})}a(document).on("click",".wppizza-trigger-choose",function(b){a(".wppizza-open").length>0&&a(".wppizza-cart").length>0&&alert(wppizza.msg.choosesize)}),a(document).on("click",".wppizza-trigger-click",function(b){if(a(".wppizza-open").length>0&&a(".wppizza-cart").length>0){var c=this.id.split("-");c=c.splice(2),c=c.join("-"),target=a("#wppizza-"+c),target.trigger("click")}}),a(document).on("click","#wppizza-login,#wppizza-login-cancel",function(b){a("#wppizza-user-login-action").toggle(300),a("#wppizza-user-login-option>span>a").toggle()}),a(document).on("click","#wppizza_btn_login",function(b){a("#wppizza-user-login-action").append('<div id="wppizza-loading"></div>')}),a(document).on("change","#wppizza_account",function(b){a("#wppizza-user-register-info").toggle(200),a(".wppizza-login-error").remove()}),a("#wppizza-send-order").length>0&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"nonce",val:"register"}},function(b){a("#wppizza-create-account").append(b)},"html").error(function(a,b,c){console.log("error : "+c),console.log(a.responseText)}),a(document).on("click",".wppizza-ordernow",function(b){a("#wppizza-send-order").validate().settings.ignore=""});var g=a("#wppizza-send-order #ctips"),h=g.val();g.keydown(function(b){if(13==b.which||35==b.which)return b.preventDefault(),a("#wppizza-ctips-btn").trigger("click"),!1}),a(document).on("click","#wppizza-ctips-btn",function(b){if(a("#wppizza-send-order").validate().settings.ignore="#wppizza-send-order>fieldset>input,#wppizza-send-order>fieldset>textarea,#wppizza-send-order>fieldset>select",a("#wppizza-send-order").valid()){var d=a("#wppizza-send-order #ctips").val();h!=d&&(a("#wppizza-send-order").prepend('<div id="wppizza-loading" style="opacity:0.8"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"add_tips",data:a("#wppizza-send-order").serialize(),locHref:location.href,urlGetVars:location.search}},function(a){location.href==a.location?window.location.reload(!0):window.location.href=a.location},"json"))}}),a("#wppizza-login-frm").validate({}),a("#wppizza-send-order").validate({rules:{ctips:{number:!0}},invalidHandler:function(b,c){if(c.numberOfInvalids()){var d=a(c.errorList[0].element),e=a(window),f=e.scrollTop(),g=f+e.height(),h=d.offset().top;h+d.height()<=g&&h>=f||a("html, body").animate({scrollTop:d.offset().top-50},300)}},submitHandler:function(b){a(".wppizza-ordernow").attr("disabled","true");var c=!1,d=!1;if(a("input[name='wppizza-gateway']").length>0){var e=a("input[name='wppizza-gateway']");if(e.is(":radio"))var f=a("input[name='wppizza-gateway']:checked");else var f=e;c=f.hasClass("wppizzaGwAjaxSubmit"),d=f.hasClass("wppizzaGwCustom")}else{var f=a("select[name='wppizza-gateway']");c=a("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwAjaxSubmit"),d=a("select[name='wppizza-gateway'] option:selected").hasClass("wppizzaGwCustom")}var g=a("#wppizza-send-order"),h=f.val();1==a("#wppizza_profile_update").is(":checked")&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"profile_update",data:g.serialize()}},function(a){},"html");var k=a("#wppizza-user-login"),l=a(".wppizza-login-error");l.length>0&&l.remove();var m=a("input[type=radio][name='wppizza_account']:checked");if(k.hide(),void 0!==m&&"register"==m.val())return g.prepend('<div id="wppizza-loading"></div>'),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"new-account",data:g.serialize()}},function(e){if(void 0!==e.error)return a("#wppizza-user-register-info").append(e.error),a("#wppizza-send-order #wppizza-loading").remove(),void k.show();void 0===e.error&&j(g,h,c,d,b)},"json");j(g,h,c,d,b)}});var j=function(b,c,d,e,f){if(void 0!==wppizza.cfrm&&!b.hasClass("wppizza-confirm-order"))return a("#wppizza-user-login").empty().remove(),b.prepend('<div id="wppizza-loading"></div>'),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"confirmorder",data:b.serialize(),hasClassAjax:d,hasClassCustom:e}},function(c){b.html(c),b.addClass("wppizza-confirm-order"),a("#wppizza-send-order #wppizza-loading").remove()},"html").error(function(b,c,d){a("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)});jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"checkifopen"}},function(g){return void 0!==g.isclosed?(alert(g.isclosed),window.location.href=window.location.href,void window.location.reload(!0)):e?(window["wppizza"+c+"payment"](),void jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"wppizza-set-userdata",data:a("#wppizza-send-order").serialize(),hash:a("#wppizza_hash").val()}},function(a){},"json").error(function(b,c,d){a("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)})):"cod"==c||d?(b.prepend('<div id="wppizza-loading"></div>'),a("#wppizza-user-login").empty().remove(),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"sendorder",data:b.serialize()}},function(c){a("html, body").animate({scrollTop:0},300),a("#wppizza-send-order #wppizza-loading").remove(),b.html('<div id="wppizza-order-received">'+c+"</div>")},"html").error(function(b,c,d){a("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)}),void 0):(b.prepend('<div id="wppizza-loading" style="opacity:0.8;"></div>'),void f.submit())},"json").error(function(b,c,d){a("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)})};if(jQuery.extend(jQuery.validator.messages,{required:wppizza.validate_error.required,email:wppizza.validate_error.email,number:wppizza.validate_error.decimal}),a.validator.methods.number=function(a,b){return this.optional(b)||/^(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(a)},a(document).on("click",".wppizza-cart-button>a",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).attr("disabled");if(void 0===c||!1===c){var d=jQuery(this).attr("href");return void(window.location.href=d)}}),void 0!==wppizza.usingCache){var k=a("#wppizza-cart-nocache-attributes").val();jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"hasCachePlugin",attributes:k}},function(b){a(".wppizza-cart-nocache").html(b.markup),e(wppizza.funcCartRefr,b.cart)},"json").complete(function(){b()}).error(function(a,b,c){console.log("error : "+c),console.log(a.responseText)})}else b();a(document).on("change",".wppizza-add-to-cart-size",function(b){var c=a(this),d=a(this).attr("id"),e=d.split("-").pop(-1),f=a("#wppizza-add-to-cart-size-"+e).val();c.closest("span").find(".wppizza-add-to-cart").prop("id","wppizza-"+f)}),a(document).on("click",".wppizza-add-to-cart-select",function(b){a(this).next().trigger("click")}),wppizzaShortcodeTotals=function(){a(".wppizza-totals").length>0&&jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"gettotals"}},function(b){var c=a(".wppizza-totals-currency"),d=a(".wppizza-total"),e=a(".wppizza-totals-itemcount"),f=a(".wppizza-totals-checkout-button"),g=a(".wppizza-totals-viewcart");b.items.length<=0?(c.html(b.currency),d.html(b.order_value.total_price_items.val),e.length>0&&e.html("&nbsp;"),g.length>0&&g.html("&nbsp;")):(c.html(b.currency),a(".wppizza-total-items").length>0?d.html(b.order_value.total_price_items.val):d.html(b.order_value.total.val),e.length>0&&e.html(b.itemcount),g.length>0&&g.html(b.viewcart)),f.html(b.button)},"json").error(function(b,c,d){a("#wppizza-send-order #wppizza-loading").remove(),console.log("error : "+d),console.log(b.responseText)})},wppizzaShortcodeTotals(),wppizzaMiniCart=function(){var b=a("#wppizza-mini-cart"),c=a(".wppizza-cart-nocache");if(b.length>0){var d=a(window);if(void 0!==wppizza.crt.mCartPadTop){var e=wppizza.crt.mCartPadTop;if(void 0!==wppizza.crt.mCartPadElm)var f=a(""+wppizza.crt.mCartPadElm);else var f=a("body")}if(c.length>0)var g=c;else var g=a(".wppizza-cart");if(void 0!==wppizza.crt.mCartElm&&b.prependTo(""+wppizza.crt.mCartElm),void 0!==wppizza.crt.mCartStatic)return void(void 0!==f&&f.css({"padding-top":"+="+e+"px"}));var h=!0;setTimeout(function(){l(d,b,g,e,f),h=!1},500);var i;a(window).scroll(function(){h||(clearTimeout(i),i=setTimeout(function(){l(d,b,g,e,f)},300))}),a(window).resize(function(){h||(clearTimeout(i),i=setTimeout(function(){l(d,b,g,e,f)},300))})}},wppizzaMiniCart();var l=function(a,b,c,d,e){var f=a.width();if(void 0!==wppizza.crt.mCartMaxWidth)var g=wppizza.crt.mCartMaxWidth;if(void 0!==g&&f>g||void 0!==wppizza.isCheckout)return void(b.is(":visible")&&b.fadeOut(250));var h=a.scrollTop(),i=h+a.height(),j=c.offset().top,k=j+c.height(),l=k<=h||j>=i;l&&b.is(":hidden")&&(void 0!==e&&e.animate({"padding-top":"+="+d+"px"},250),b.fadeIn(250)),!l&&b.is(":visible")&&(void 0!==e&&e.animate({"padding-top":"-="+d+"px"},250),b.fadeOut(250))};a(document).on("click",".wppizza-totals-viewcart",function(b){var c=a(".wppizza-cart");if(c.length>0){var d=a("#wppizza-mini-cart"),e=d.outerHeight(),f=d.position().top+e,g=c.offset().top-(f+10);a("html, body").animate({scrollTop:Math.round(g)},100)}})});